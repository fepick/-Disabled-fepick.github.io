<body>
  <script type="module">
	import * as THREE from 	'https://unpkg.com/three@0.126.1/build/three.module.js';
import { OrbitControls } from 'https://unpkg.com/three@0.126.1/examples/jsm/controls/OrbitControls.js'
//import * as dat from 'dat.gui'

/*const gui = new dat.GUI()
const world = {
  plane: {
    width: 5,
    height: 5,
    widthSegments: 10,
    heightSegments: 10
  }
}
gui.add(world.plane, 'width', 1, 10).
  onChange(() => {
    generatePlane()
  })
gui.add(world.plane, 'height', 1, 10).
  onChange(() => {
    generatePlane()
  })
  gui.add(world.plane, 'widthSegments', 1, 20).
  onChange(() => {
    generatePlane()
  })
  gui.add(world.plane, 'heightSegments', 1, 20).
  onChange(() => {
    generatePlane()
  })
function generatePlane() {
  planeMesh.geometry.dispose()
  planeMesh.geometry = new THREE.
    PlaneGeometry(
      world.plane.width,
      world.plane.height,
      world.plane.widthSegments,
      world.plane.heightSegments
    )
  const {array} = planeMesh.geometry.attributes.position
  for (let i = 0; i < array.length; i += 3)  {
    array[i + 2] = array[i + 2] + Math.random()
  }
}
*/
const scene = new THREE.Scene();
const camera = new THREE.
	PerspectiveCamera(
    75,
    innerWidth / innerHeight,
    0.1,
    1000
  )

const raycaster = new THREE.Raycaster()

const renderer = new THREE.WebGLRenderer()

renderer.setSize(innerWidth, innerHeight)
renderer.setPixelRatio(devicePixelRatio)
document.body.appendChild(renderer.domElement)

const material = new THREE.MeshBasicMaterial(
  {color: 0x00FF00}
)

new OrbitControls(camera, renderer.domElement)
camera.position.z = 5

const planeGeometry = new THREE.
  PlaneGeometry(5, 5, 10, 10)
const planeMaterial = new THREE.
  MeshPhongMaterial(
    {
      color: 0xFF0000,
      side: THREE.DoubleSide,
      flatShading: THREE.FlatShading
    }
  )

const light = new THREE.DirectionalLight(
  0xFFFFFF,
  1
)
light.position.set(0, 0, 1)

const backLight = new THREE.DirectionalLight(
  0xFFFFFF,
  1
)
backLight.position.set(0, 0, -1)

const planeMesh = new THREE.Mesh(
  planeGeometry, planeMaterial
)

const {array} = planeMesh.geometry.attributes.position
for (let i = 0; i < array.length; i += 3)  {
  array[i + 2] = array[i + 2] + Math.random()
}

scene.add(planeMesh)
scene.add(light)
scene.add(backLight)

const mouse = {
  x: undefined,
  y: undefined
}

function animate()	{
	requestAnimationFrame(animate)
	renderer.render(scene, camera)
  
  raycaster.setFromCamera(mouse, camera)
  const intersects = raycaster.
    intersectObject(planeMesh)
  console.log(intersects)
}

addEventListener('mousemove', (event) => {
  mouse.x = (event.clientX / innerWidth - 0.5) * 2
  mouse.y = -(event.clientY / innerHeight - 0.5) * 2
})

animate()
  </script>
</body>
